(this.webpackJsonpsupabase=this.webpackJsonpsupabase||[]).push([[0],{13:function(e,t,a){e.exports={contacts:"Contacts_contacts__1fBzx",contacts__title:"Contacts_contacts__title__2z3XN",contacts__new:"Contacts_contacts__new__1EXpw",contacts__search:"Contacts_contacts__search__3Tugv",contacts__desc:"Contacts_contacts__desc__1jE-y",contactsList:"Contacts_contactsList__38FN9",contactsList__item:"Contacts_contactsList__item__3lviL"}},17:function(e,t,a){e.exports={contact:"Contact_contact__1Jmcf",contact__wrap:"Contact_contact__wrap__1QGWj",contact__btnWrap:"Contact_contact__btnWrap__Gaipm",contact__btn:"Contact_contact__btn__2MR-1",wrap__fullName:"Contact_wrap__fullName__2cz4Y",wrap__email:"Contact_wrap__email__1AW2I"}},197:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),n=a(25),r=a.n(n),i=a(4),l=a(11),o=a(16),d=a(87);const _=["id"],b=String("https://ydoqnhdxjtfgdarjtprg.supabase.co"),m=String("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlkb3FuaGR4anRmZ2Rhcmp0cHJnIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDcwNzg5MTMsImV4cCI6MTk2MjY1NDkxM30.LUsRRZWNfSv44OivMdP4lToB4LHXNi9qApH9FLtcAwA");const j=new class{constructor(){this.supabase=void 0,this.supabase=Object(d.a)(b,m)}getUserCred(){return this.supabase.auth.user()}async singIn(e,t){const{user:a,error:s}=await this.supabase.auth.signIn({password:e,email:t});if(s)throw new Error(s.message);if(!a)throw new Error("user not found");return a}async signUp(e){let{firstName:t,lastName:a,password:s,email:c}=e;const{user:n,error:r}=await this.supabase.auth.signUp({password:s,email:c},{data:{firstName:t,lastName:a}});if(r)throw new Error(r.message);if(!n)throw new Error("user not found");return n}async logOut(){return this.supabase.auth.signOut()}async getContactList(e){const{data:t,error:a}=await this.supabase.from("contact").select("*").match({user_id:e});return t||[]}async createContact(e){const{data:t,error:a}=await this.supabase.from("contact").insert(e,{returning:"representation"});return null===t||void 0===t?void 0:t[0]}async updateContact(e){const{id:t}=e,a=Object(o.a)(e,_),{data:s,error:c}=await this.supabase.from("contact").update(a,{returning:"representation"}).match({id:t});return null===s||void 0===s?void 0:s[0]}async deleteContact(e){const{data:t,error:a}=await this.supabase.from("contact").delete().match({id:e});return null===t||void 0===t?void 0:t[0]}},u=e=>{const t=e;return t.message?t.message:"unknown error"},p=Object(l.b)({name:"formSignIn",initialState:{isSending:!1,isSended:!1,error:null},reducers:{sendDataStart:e=>{e.isSending=!0,e.isSended=!1},sendDataSuccess:e=>{e.isSending=!1,e.isSended=!0},sendDataFailure:(e,t)=>{let{payload:a}=t;e.error=a,e.isSending=!1,e.isSended=!0}}}),{sendDataStart:h,sendDataSuccess:O,sendDataFailure:f}=p.actions,g=e=>e.formSignIn;var x=p.reducer;const N=Object(l.b)({name:"formSignUp",initialState:{isSending:!1,isSended:!1,error:null},reducers:{sendDataStart:e=>{e.isSending=!0,e.isSended=!1},sendDataSuccess:e=>{e.isSending=!1,e.isSended=!0},sendDataFailure:(e,t)=>{let{payload:a}=t;e.error=a,e.isSending=!1,e.isSended=!0}}}),{sendDataStart:v,sendDataSuccess:S,sendDataFailure:C}=N.actions,w=e=>e.formSignUp;var A=N.reducer;const L=Object(l.b)({name:"contacts",initialState:{contacts:[],isLoading:!1,isLoaded:!1,error:""},reducers:{getDataStart:e=>{e.isLoading=!0},getDataSuccess:(e,t)=>{let{payload:a}=t;e.contacts=a,e.isLoading=!1,e.isLoaded=!0},getDataFailure:(e,t)=>{let{payload:a}=t;e.error=a,e.isLoading=!1}}}),{getDataStart:y,getDataSuccess:D,getDataFailure:F}=L.actions,B=e=>async t=>{t(y());try{const a=await j.getContactList(e);t(a?D(a):F("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"))}catch(a){t(F(u(a)))}},I=e=>e.contacts;var U=L.reducer;const E=Object(l.b)({name:"user",initialState:{user:null},reducers:{setUser:(e,t)=>{let{payload:a}=t;e.user=a},removeUser:e=>{e.user=null}}}),{setUser:k,removeUser:T}=E.actions;var M=E.reducer;const J={first_name:"",last_name:"",email:"",id:null},V={isSending:!1,isSended:!1,error:null,currentContact:J},Q=Object(l.b)({name:"contact",initialState:V,reducers:{sendDataStart:e=>{e.isSending=!0,e.isSended=!1},sendDataSuccess:e=>{e.isSending=!1,e.isSended=!0,e.currentContact=J},sendDataFailure:(e,t)=>{let{payload:a}=t;e.error=a,e.isSending=!1,e.isSended=!0,e.currentContact=J},setCurrentContact:(e,t)=>{let{payload:a}=t;e.currentContact=a},setDefaultContact:e=>{e.currentContact=J},setToDeleteIdContact:(e,t)=>{let{payload:a}=t;e.currentContact.id=a}}}),{sendDataStart:P,sendDataSuccess:Y,sendDataFailure:H}=Q.actions,{setCurrentContact:q,setDefaultContact:R,setToDeleteIdContact:W}=Q.actions,X=e=>e.contact;var G=Q.reducer;var Z=Object(l.a)({devTools:!1,reducer:{user:M,formSignIn:x,formSignUp:A,contacts:U,contact:G}}),z=a(22),K=a(3);var $=e=>{let{children:t}=e;const[a,c]=Object(s.useState)(!0);return t(a,(()=>{c(!a)}))},ee=a(2),te=a(12),ae=a(27),se=a(10),ce=a(6),ne=a.n(ce),re=a(28),ie=a.n(re),le=a(1);const oe=["type","autoFocus","className","label","error"],de=Object(s.forwardRef)(((e,t)=>{let{type:a="text",autoFocus:c=!1,className:n="",label:r="",error:i=""}=e,d=Object(o.a)(e,oe);const _=Object(s.useRef)(Object(l.c)()).current;return Object(le.jsxs)("div",{className:ne()(ie.a.formfield,n,{[ie.a.formfield_error]:!!i}),children:[r&&Object(le.jsx)("label",{htmlFor:_,className:ie.a.formfield__label,children:r}),Object(le.jsx)("input",Object(ee.a)({ref:t,type:a,autoFocus:c,autoComplete:"off",className:ie.a.formfield__input},d)),Object(le.jsx)("small",{className:ie.a.formfield__error,children:i})]})}));de.displayName="Input";var _e=de,be=a(82),me=a.n(be);var je=e=>{let{handleClick:t,type:a="button",className:s="",children:c,disabled:n}=e;return Object(le.jsx)("button",{type:a,onClick:t,className:ne()(me.a.btn,s),disabled:n,children:c})},ue=a(5),pe=a.n(ue),he=a(83),Oe=a.n(he);var fe=()=>Object(le.jsx)("div",{className:Oe.a.spinner});const ge=se.a().shape({email:se.b().email().required(),password:se.b().min(6).required()});var xe=e=>{var t,a;let{onSuccess:s,tglPopup:c}=e;const n=Object(i.b)(),{isSending:r,error:l}=Object(i.c)(g),{register:o,handleSubmit:d,formState:{errors:_}}=Object(te.d)({mode:"onBlur",resolver:Object(ae.a)(ge)}),b=d((e=>{n(((e,t)=>{let{password:a,email:s}=e;return async e=>{e(h());try{await j.singIn(a,s)?(e(O()),t&&t()):e(f("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"))}catch(c){e(f(u(c)))}}})(e,s))}));return Object(le.jsxs)("form",{className:pe.a.form,noValidate:!0,onSubmit:b,children:[Object(le.jsx)("h3",{className:pe.a.form__title,children:"Fill the form"}),Object(le.jsxs)("div",{className:pe.a.form__fields,children:[Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,type:"email",error:null===(t=_.email)||void 0===t?void 0:t.message},o("email")),{},{placeholder:"email",label:"Email",readOnly:r})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,type:"password",error:null===(a=_.password)||void 0===a?void 0:a.message},o("password")),{},{placeholder:"password",label:"Password",readOnly:r}))]}),Object(le.jsx)("div",{className:ne()(pe.a.form__btns,r&&pe.a.form__btns_sending),children:r?Object(le.jsx)(fe,{}):Object(le.jsxs)(le.Fragment,{children:[l&&Object(le.jsx)("p",{className:pe.a.form__error,children:l}),Object(le.jsx)(je,{type:"submit",className:pe.a.form__submit,children:"Sing In"}),Object(le.jsx)(je,{className:pe.a.form__submit,handleClick:c,children:"Sing Up"})]})})]})};const Ne=se.a().shape({firstName:se.b().required(),lastName:se.b().required(),email:se.b().email().required(),password:se.b().min(6).required()});var ve=e=>{var t,a,s,c;let{onSuccess:n,tglPopup:r}=e;const l=Object(i.b)(),{isSending:o,error:d}=Object(i.c)(w),{register:_,handleSubmit:b,formState:{errors:m}}=Object(te.d)({mode:"onBlur",resolver:Object(ae.a)(Ne)}),p=b((e=>{l(((e,t)=>{let{firstName:a,lastName:s,password:c,email:n}=e;return async e=>{e(v());try{await j.signUp({firstName:a,lastName:s,password:c,email:n})?(e(S()),t&&t()):e(C("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"))}catch(r){e(C(u(r)))}}})(e,(()=>{n()})))}));return Object(le.jsxs)("form",{className:pe.a.form,noValidate:!0,onSubmit:p,children:[Object(le.jsx)("h3",{className:pe.a.form__title,children:"Fill the form"}),Object(le.jsxs)("div",{className:pe.a.form__fields,children:[Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,autoFocus:!0,error:null===(t=m.firstName)||void 0===t?void 0:t.message},_("firstName")),{},{placeholder:"firstName",label:"firstName"})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,error:null===(a=m.lastName)||void 0===a?void 0:a.message},_("lastName")),{},{placeholder:"lastName",label:"lastName"})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,type:"email",error:null===(s=m.email)||void 0===s?void 0:s.message},_("email")),{},{placeholder:"email",label:"Email"})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,type:"password",error:null===(c=m.password)||void 0===c?void 0:c.message},_("password")),{},{placeholder:"password",label:"Password"}))]}),Object(le.jsx)("div",{className:ne()(pe.a.form__btns,o&&pe.a.form__btns_sending),children:o?Object(le.jsx)(fe,{}):Object(le.jsxs)(le.Fragment,{children:[d&&Object(le.jsx)("p",{className:pe.a.form__error,children:d}),Object(le.jsx)(je,{type:"submit",className:pe.a.form__submit,children:"Sing Up"}),Object(le.jsx)(je,{className:pe.a.form__submit,handleClick:r,children:"Sing In"})]})})]})},Se=a(9),Ce=a.n(Se),we=a(26);const Ae=Object(we.a)([e=>e.user],(e=>e.user));var Le=e=>{let{tglPopupSingIn:t,tglPopupSingUp:a}=e;const s=Object(i.c)(Ae),c=(()=>{const e=Object(i.b)();return async()=>{await j.logOut(),e(T())}})();return Object(le.jsxs)("header",{className:Ce.a.header,children:[Object(le.jsx)("nav",{className:ne()(Ce.a.header__nav,Ce.a.headerNav),children:Object(le.jsxs)("ul",{className:ne()(Ce.a.headerNav__list,Ce.a.navList),children:[Object(le.jsx)("li",{className:Ce.a.navList__item,children:Object(le.jsxs)(z.b,{to:"/",className:Ce.a.headerLink,children:[Object(le.jsx)("img",{src:"data:image/png;base64,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",alt:"logo",className:Ce.a.headerLink__img}),Object(le.jsx)("span",{className:ne()(Ce.a.headerLink__name,"h4"),children:"Logo"})]})}),s&&Object(le.jsx)("li",{className:Ce.a.navList__item,children:Object(le.jsx)(z.b,{to:"contacts",className:Ce.a.headerLink,children:Object(le.jsx)("span",{className:ne()(Ce.a.headerLink__name,"h4"),children:"Contacts"})})})]})}),Object(le.jsx)("div",{className:Ce.a.headerBtns,children:s?Object(le.jsx)(je,{handleClick:c,className:Ce.a.headerBtns__btn,children:"Log out"}):Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(je,{handleClick:t,className:Ce.a.headerBtns__btn,children:"Sing In"}),Object(le.jsx)(je,{handleClick:a,className:Ce.a.headerBtns__btn,children:"Sign Up"})]})})]})},ye=a(24),De=a.n(ye);var Fe=e=>{let{hide:t=(()=>{}),modifierPopupClass:a="",children:c=null,container:r=document.body}=e;const[i,l]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{l(!0)}),[]),Object(le.jsx)(le.Fragment,{children:Object(n.createPortal)(Object(le.jsxs)("div",{className:ne()(De.a.popup,De.a[a],{[De.a.popup_visible]:i}),children:[Object(le.jsx)("div",{className:De.a.popup__bg,onClick:t}),Object(le.jsxs)("div",{className:De.a.popup__wrap,children:[Object(le.jsx)("button",{className:De.a.popup__close,onClick:t}),c]})]}),r)})},Be=a.p+"static/media/check.492df004.svg",Ie=a(41),Ue=a.n(Ie);var Ee=e=>{let{hide:t=(()=>null),time:a=2500,desc:c=""}=e;const n=Object(s.useRef)();return Object(s.useEffect)((()=>(n.current=setTimeout((()=>{t()}),a),()=>{n.current&&clearTimeout(n.current)})),[]),Object(le.jsxs)("div",{className:Ue.a.popupThx,children:[Object(le.jsx)("p",{className:Ue.a.popupThx__desc,children:c}),Object(le.jsx)("img",{src:Be,alt:"\u2713",className:Ue.a.popupThx__icon})]})};var ke=()=>{const e=document.querySelector(".root"),t=Object(K.g)(),[a,c]=Object(s.useState)(!1),[n,r]=Object(s.useState)(!1),i=()=>{n&&r(!1),c((e=>!e))},l=()=>{a&&c(!1),r((e=>!e))};return Object(s.useEffect)((()=>{e&&e.scrollTo(0,0)}),[t]),Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Le,{tglPopupSingUp:i,tglPopupSingIn:l}),Object(le.jsx)("main",{children:Object(le.jsx)(K.b,{})}),n&&Object(le.jsx)(Fe,{hide:l,children:Object(le.jsx)($,{children:(e,t)=>e?Object(le.jsx)(xe,{onSuccess:t,tglPopup:i}):Object(le.jsx)(Ee,{hide:l,desc:"Successfully logged in"})})}),a&&Object(le.jsx)(Fe,{hide:i,children:Object(le.jsx)($,{children:(e,t)=>e?Object(le.jsx)(ve,{onSuccess:t,tglPopup:l}):Object(le.jsx)(Ee,{hide:i,desc:"Successfully registered"})})})]})},Te=a(54),Me=a.n(Te);var Je=()=>{var e;const t=Object(i.c)(Ae);return Object(le.jsx)("section",{className:Me.a.home,children:Object(le.jsxs)("h2",{className:Me.a.home__title,children:["Hellow ",t?null===(e=t.user_metadata)||void 0===e?void 0:e.firstName:"User"]})})},Ve=a(42),Qe=a.n(Ve);var Pe=e=>{let{handleClick:t,children:a,type:s,className:c=""}=e;return Object(le.jsx)("button",{onClick:t,className:ne()(c,Qe.a.btn,{[Qe.a.btn_delete]:"delete"===s,[Qe.a.btn_edit]:"edit"===s}),children:a})},Ye=a.p+"static/media/trash.d5ada1c8.svg",He=a.p+"static/media/edit.56b97d7a.svg",qe=a(17),Re=a.n(qe);var We=e=>{let{className:t,id:a,first_name:s,last_name:c,email:n,tglPopupContact:r,tglPopupWarning:l}=e;const o=Object(i.b)();return Object(le.jsxs)("li",{className:ne()(t,Re.a.contact),children:[Object(le.jsxs)("div",{className:ne()(Re.a.contact__wrap,Re.a.wrap),children:[Object(le.jsx)("p",{className:Re.a.wrap__fullName,children:"".concat(s," ").concat(c)}),Object(le.jsx)("p",{className:Re.a.wrap__email,children:n})]}),Object(le.jsxs)("div",{className:Re.a.contact__btnWrap,children:[Object(le.jsx)(Pe,{type:"edit",className:Re.a.contact__btn,handleClick:()=>{o(q({id:a,first_name:s,last_name:c,email:n})),r()},children:Object(le.jsx)("img",{src:He,alt:"Edit"})}),Object(le.jsx)(Pe,{type:"delete",className:Re.a.contact__btn,handleClick:()=>{a&&o(W(a)),l()},children:Object(le.jsx)("img",{src:Ye,alt:"Delete"})})]})]})},Xe=a(84),Ge=a(13),Ze=a.n(Ge);const ze=se.a().shape({first_name:se.b().required(),last_name:se.b().required(),email:se.b().email().required()});var Ke=e=>{var t,a,s;let{onSuccess:c}=e;const n=Object(i.b)(),{isSending:r,currentContact:l}=Object(i.c)(X),o=Object(i.c)(Ae),{id:d,first_name:_,last_name:b,email:m}=l,{register:p,handleSubmit:h,formState:{errors:O}}=Object(te.d)({mode:"onBlur",resolver:Object(ae.a)(ze)}),f=()=>{o&&n(B(o.id)),c()},g=h((e=>{if(d)n(((e,t)=>async a=>{a(P());try{await j.updateContact(e)?(a(Y()),t&&t()):a(H("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"))}catch(s){a(H(u(s)))}})(Object(ee.a)(Object(ee.a)({},e),{},{id:d}),f));else{const t=null===o||void 0===o?void 0:o.id;n(((e,t)=>async a=>{a(P());try{await j.createContact(e)?(a(Y()),t&&t()):a(H("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"))}catch(s){a(H(u(s)))}})(Object(ee.a)(Object(ee.a)({},e),{},{user_id:t}),f))}}));return Object(le.jsxs)("form",{className:pe.a.form,noValidate:!0,onSubmit:g,children:[Object(le.jsx)("h3",{className:pe.a.form__title,children:d?"Update contact":"Create new contact"}),Object(le.jsxs)("div",{className:pe.a.form__fields,children:[Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,autoFocus:!0,error:null===(t=O.first_name)||void 0===t?void 0:t.message},p("first_name")),{},{placeholder:"firstName",label:"firstName",defaultValue:_})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,error:null===(a=O.last_name)||void 0===a?void 0:a.message},p("last_name")),{},{placeholder:"lastName",label:"lastName",defaultValue:b})),Object(le.jsx)(_e,Object(ee.a)(Object(ee.a)({className:pe.a.form__field,type:"email",error:null===(s=O.email)||void 0===s?void 0:s.message},p("email")),{},{placeholder:"email",label:"Email",defaultValue:m}))]}),r?Object(le.jsx)(fe,{}):Object(le.jsx)(je,{type:"submit",className:pe.a.form__submit,children:d?"Save":"Create"})]})},$e=a(86),et=a.n($e);var tt=e=>{let{className:t,value:a,handleChange:s}=e;return Object(le.jsx)("input",{type:"search",name:"search",placeholder:"match-sorter search...",id:"search",value:a,onChange:s,className:ne()(t,et.a.search)})},at=a(32),st=a.n(at);var ct=e=>{let{hide:t}=e;const a=Object(i.b)();return Object(le.jsxs)("div",{className:st.a.warning,children:[Object(le.jsx)("p",{className:st.a.warning__desc,children:"Are you sure to delete this contact?"}),Object(le.jsxs)("div",{className:st.a.btns,children:[Object(le.jsx)(je,{className:st.a.btns__btn,handleClick:()=>{var e;a((e=t,async(t,a)=>{t(P());const{contact:s}=a(),{currentContact:{id:c}}=s;try{c&&(await j.deleteContact(c)?(t(Y()),e&&e()):t(H("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")))}catch(n){t(H(u(n)))}}))},children:"Yes"}),Object(le.jsx)(je,{handleClick:t,children:"No"})]})]})};var nt=()=>{const e=Object(i.b)(),t=Object(i.c)(Ae),{currentContact:a}=Object(i.c)(X),{contacts:c,isLoaded:n}=Object(i.c)(I),[r,l]=Object(s.useState)(!1),[o,d]=Object(s.useState)(!1),[_,b]=Object(s.useState)(""),m=()=>{r&&null!==a&&void 0!==a&&a.id&&e(R()),l(!r)},j=()=>{d(!o)};Object(s.useEffect)((()=>{t&&e(B(t.id))}),[]);const u=Object(s.useMemo)((()=>_?Object(Xe.a)(c,_,{keys:["first_name","last_name","email"]}):c),[c,_]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("section",{className:Ze.a.contacts,children:[Object(le.jsx)("h2",{className:Ze.a.contacts__title,children:"Contacts"}),n?Object(le.jsxs)(le.Fragment,{children:[c.length&&Object(le.jsx)(tt,{className:Ze.a.contacts__search,value:_,handleChange:e=>{b(e.target.value)}}),Object(le.jsx)(je,{className:Ze.a.contacts__new,handleClick:m,children:"New contact +"}),Object(le.jsx)(le.Fragment,{children:c.length?Object(le.jsx)(le.Fragment,{children:u.length?Object(le.jsx)("ul",{className:ne()(Ze.a.contacts__list,Ze.a.contactsList),children:u.map((e=>Object(le.jsx)(We,Object(ee.a)(Object(ee.a)({},e),{},{className:Ze.a.contactsList__item,tglPopupContact:m,tglPopupWarning:j}),e.id)))}):Object(le.jsx)("p",{className:Ze.a.contacts__desc,children:"No matches"})}):Object(le.jsx)("p",{className:Ze.a.contacts__desc,children:"Contact list is empty"})})]}):Object(le.jsx)(fe,{})]}),r&&Object(le.jsx)(Fe,{hide:m,children:Object(le.jsx)($,{children:(e,t)=>e?Object(le.jsx)(Ke,{onSuccess:t}):Object(le.jsx)(Ee,{hide:m,desc:"Contact created"})})}),o&&Object(le.jsx)(Fe,{hide:j,children:Object(le.jsx)(ct,{hide:j})})]})};var rt=()=>Object(le.jsx)("div",{children:Object(le.jsx)("h1",{children:"NotFound 404"})});const it=e=>{let{children:t}=e;const a=Object(i.b)();return Object(s.useEffect)((()=>{const{data:e}=j.supabase.auth.onAuthStateChange(((e,t)=>{if(t){const{user:e}=t;a(k(e))}}));return()=>{e&&e.unsubscribe()}}),[]),Object(le.jsx)(le.Fragment,{children:t})},lt=e=>{let{children:t}=e;const a=Object(i.c)(Ae),s=Object(K.g)();return a?Object(le.jsx)(le.Fragment,{children:t}):Object(le.jsx)(K.a,{to:"/",state:{from:s}})};var ot=()=>(Object(s.useEffect)((()=>{const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),Object(le.jsx)(z.a,{children:Object(le.jsx)(it,{children:Object(le.jsx)(K.e,{children:Object(le.jsxs)(K.c,{path:"/",element:Object(le.jsx)(ke,{}),children:[Object(le.jsx)(K.c,{index:!0,element:Object(le.jsx)(Je,{})}),Object(le.jsx)(K.c,{path:"contacts",element:Object(le.jsx)(lt,{children:Object(le.jsx)(nt,{})})}),Object(le.jsx)(K.c,{path:"*",element:Object(le.jsx)(rt,{})})]})})})}));a(197);r.a.render(Object(le.jsx)(c.a.StrictMode,{children:Object(le.jsx)(i.a,{store:Z,children:Object(le.jsx)(ot,{})})}),document.getElementById("root"))},24:function(e,t,a){e.exports={popup:"Modal_popup__3HWzH",popup__bg:"Modal_popup__bg__3C0OI",popup__wrap:"Modal_popup__wrap__5soEK",popup__close:"Modal_popup__close__3lt8n",popup_visible:"Modal_popup_visible__1w6iL"}},28:function(e,t,a){e.exports={formfield:"Input_formfield__Blhdm",formfield__label:"Input_formfield__label__1fzXM",formfield__input:"Input_formfield__input__1fOyk",formfield__error:"Input_formfield__error__3w7RN",formfield_error:"Input_formfield_error__3dSuz"}},32:function(e,t,a){e.exports={warning__desc:"WarningInfo_warning__desc__fLVfD",btns:"WarningInfo_btns__15UP-",btns__btn:"WarningInfo_btns__btn__ZyVtY"}},41:function(e,t,a){e.exports={popupThx:"ModalThx_popupThx__52-u0",popupThx__desc:"ModalThx_popupThx__desc__3UBpQ",popupThx__icon:"ModalThx_popupThx__icon__3LxHU"}},42:function(e,t,a){e.exports={btn:"ButtonWithImage_btn__2YT6R"}},5:function(e,t,a){e.exports={form__title:"Form_form__title__3ODSd",form__fields:"Form_form__fields__3Xd7N",form__field:"Form_form__field__2PaXH",form__error:"Form_form__error__3B24z",form__btns:"Form_form__btns__Z-s1v",form__btns_sending:"Form_form__btns_sending__kEwiK",form__submit:"Form_form__submit__1aF4X"}},54:function(e,t,a){e.exports={home:"Home_home__2V-2G",home__title:"Home_home__title__24YU3"}},82:function(e,t,a){e.exports={btn:"Btn_btn__1N-qA"}},83:function(e,t,a){e.exports={spinner:"Spinner_spinner__2gmPQ","first-ring":"Spinner_first-ring__3e4o1","second-ring":"Spinner_second-ring__2og0D"}},86:function(e,t,a){e.exports={search:"SearchInput_search__1JVbr"}},9:function(e,t,a){e.exports={header:"Header_header__1lXUx",headerNav:"Header_headerNav__308J4",navList:"Header_navList__LRgy-",navList__item:"Header_navList__item__u7v-U",headerLink:"Header_headerLink__2kOuj",headerLink__img:"Header_headerLink__img__1F2-K",headerLink__name:"Header_headerLink__name__1U9xW",headerBtns:"Header_headerBtns__1C7D2",headerBtns__btn:"Header_headerBtns__btn__2M6LW"}}},[[198,1,2]]]);